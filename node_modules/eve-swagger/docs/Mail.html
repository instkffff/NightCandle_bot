<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>Eve Swagger JS Class: Mail</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.lumen.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">Eve Swagger JS</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu inline">
					<li><a href="module-eve_swagger_interface.html">eve_swagger_interface</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu inline">
					<li><a href="Agents.html">Agents</a></li><li><a href="Alliance.html">Alliance</a></li><li><a href="Alliances.html">Alliances</a></li><li><a href="API.html">API</a></li><li><a href="Attribute.html">Attribute</a></li><li><a href="Attributes.html">Attributes</a></li><li><a href="Autopilot.html">Autopilot</a></li><li><a href="Bloodlines.html">Bloodlines</a></li><li><a href="Bookmarks.html">Bookmarks</a></li><li><a href="Calendar.html">Calendar</a></li><li><a href="Categories.html">Categories</a></li><li><a href="Category.html">Category</a></li><li><a href="Character.html">Character</a></li><li><a href="CharacterCorporation.html">CharacterCorporation</a></li><li><a href="CharacterInfo.html">CharacterInfo</a></li><li><a href="Characters.html">Characters</a></li><li><a href="Colonies.html">Colonies</a></li><li><a href="Constellation.html">Constellation</a></li><li><a href="Constellations.html">Constellations</a></li><li><a href="Contact.html">Contact</a></li><li><a href="Contacts.html">Contacts</a></li><li><a href="Corporation.html">Corporation</a></li><li><a href="Corporations.html">Corporations</a></li><li><a href="Dogma.html">Dogma</a></li><li><a href="Effect.html">Effect</a></li><li><a href="Effects.html">Effects</a></li><li><a href="Event.html">Event</a></li><li><a href="Factions.html">Factions</a></li><li><a href="Fitting.html">Fitting</a></li><li><a href="Fittings.html">Fittings</a></li><li><a href="Fleet.html">Fleet</a></li><li><a href="Freeports.html">Freeports</a></li><li><a href="Graphic.html">Graphic</a></li><li><a href="Graphics.html">Graphics</a></li><li><a href="Group.html">Group</a></li><li><a href="Groups.html">Groups</a></li><li><a href="Incursions.html">Incursions</a></li><li><a href="Industry.html">Industry</a></li><li><a href="Insurance.html">Insurance</a></li><li><a href="Killmail.html">Killmail</a></li><li><a href="Label.html">Label</a></li><li><a href="Labels.html">Labels</a></li><li><a href="Mail.html">Mail</a></li><li><a href="MarketGroup.html">MarketGroup</a></li><li><a href="MarketGroups.html">MarketGroups</a></li><li><a href="Message.html">Message</a></li><li><a href="Moon.html">Moon</a></li><li><a href="Moons.html">Moons</a></li><li><a href="Opportunities.html">Opportunities</a></li><li><a href="OpportunityGroup.html">OpportunityGroup</a></li><li><a href="OpportunityGroups.html">OpportunityGroups</a></li><li><a href="OpportunityTask.html">OpportunityTask</a></li><li><a href="OpportunityTasks.html">OpportunityTasks</a></li><li><a href="Planet.html">Planet</a></li><li><a href="PlanetaryInteraction.html">PlanetaryInteraction</a></li><li><a href="Planets.html">Planets</a></li><li><a href="Races.html">Races</a></li><li><a href="Region.html">Region</a></li><li><a href="Regions.html">Regions</a></li><li><a href="Search.html">Search</a></li><li><a href="SolarSystem.html">SolarSystem</a></li><li><a href="SolarSystems.html">SolarSystems</a></li><li><a href="Sovereignty.html">Sovereignty</a></li><li><a href="Squad.html">Squad</a></li><li><a href="Squads.html">Squads</a></li><li><a href="Stargate.html">Stargate</a></li><li><a href="Stargates.html">Stargates</a></li><li><a href="Station.html">Station</a></li><li><a href="Stations.html">Stations</a></li><li><a href="Structure.html">Structure</a></li><li><a href="Structures.html">Structures</a></li><li><a href="Type.html">Type</a></li><li><a href="Types.html">Types</a></li><li><a href="War.html">War</a></li><li><a href="Wars.html">Wars</a></li><li><a href="Window.html">Window</a></li><li><a href="Wing.html">Wing</a></li><li><a href="Wings.html">Wings</a></li><li><a href="Wormholes.html">Wormholes</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-8">
	
		<div id="main">
			

	<h1 class="page-title">Class: Mail</h1>
<section>

<header>
    
        <h2>
        Mail
        </h2>
        
            <div class="class-description"><p>An api adapter over the end points handling the mail inbox for a character
via functions in the <a href="https://esi.tech.ccp.is/latest/#/Mail">mail</a> ESI
endpoints. You should not usually instantiate this directly as its
constructor requires an internal api instance.</p>
<p>This is a function class so instances of <code>Mail</code> are functions and can be
invoked directly, besides accessing its members. Its default function action
is equivalent to <a href="Mail.html#get">get</a> or <a href="Mail.html#inbox">inbox</a> if no id is
given.</p></div>
        
    
</header>


<article>
    <div class="container-overview">
    
        
<hr>
<dt>
    <h4 class="name" id="Mail"><span class="type-signature"></span>new Mail(agent, characterId, token)</h4>
    
    
</dt>
<dd>

    
    <div class="description">
        <p>Create a new Mail function for the character, including its SSO token.</p>
    </div>
    

    

    

    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>agent</code></td>
            

            <td class="type">
            
                
<span class="param-type">ESIAgent</span>



            
            </td>

            

            

            <td class="description last"><p>The ESI agent</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>characterId</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>



            
            </td>

            

            

            <td class="description last"><p>The id of the character whose mail is accessed</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>token</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>



            
            </td>

            

            

            <td class="description last"><p>The SSO access token for the character</p></td>
        </tr>

    
    </tbody>
</table>

    

    
<dl class="details">
    

	

	

	

    

    

    

    

	

	

	

	

	



	

	

	

	
</dl>


    

    

    

    

    

    

    
</dd>

    
    </div>

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        <dl>
            
<hr>
<dt class="name" id="labels">
    <h4 id="labels"><span class="type-signature"></span>labels<span class="type-signature"> :<a href="Labels.html">Labels</a></span></h4>

    
</dt>
<dd>
    
    <div class="description">
        <p>A Labels instance for this character, allowing access to the labels they
have created.</p>
    </div>
    

    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type"><a href="Labels.html">Labels</a></span>



            </li>
        </ul>
    

    
<dl class="details">
    

	

	

	

    

    

    

    

	

	

	

	

	



	

	

	

	
</dl>


    
</dd>

        </dl>
    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
            
<hr>
<dt>
    <h4 class="name" id="all"><span class="type-signature"></span>all()</h4>
    
    
</dt>
<dd>

    
    <div class="description">
        <p>Fetch all mails for the character as a single array. This makes multiple
calls to inbox. Use with caution as certain characters
could have substantial amounts of mail.</p>
    </div>
    

    

    

    
    

    
<dl class="details">
    

	

	

	

    

    

    

    

	

	

	

	

	



	

	

	

	
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;Object>></span>



    </dd>
</dl>


        

    
</dd>

        
            
<hr>
<dt>
    <h4 class="name" id="cspaCost"><span class="type-signature"></span>cspaCost(toIds)</h4>
    
    
</dt>
<dd>

    
    <div class="description">
        <p>Takes a source character ID in the url and a set of target character ID's in the body, returns a CSPA charge cost. </p>
<p>This makes an HTTP POST request to <a href="https://esi.tech.ccp.is/latest/#!/Character/post_characters_character_id_cspa"><code>/characters/{character_id}/cspa/</code></a>. The route version is <code>v3</code>. </p>
<p>The route parameter, <code>characters</code>, is built implicitly by the function.  The function argument <code>toIds</code> maps to the <code>characters</code> property of the <code>characters</code> route parameter. The array length of <code>toIds</code> must be between <code>1</code> and <code>100</code>.  </p>
<p>On success, this resolves to aggregate cost of sending a mail from the source character to the target characters, in ISK hundredths.  Note that the type schema of the response is modified from what is defined in ESI. Specifically, it returns only the <code>cost</code> property.</p>
<p>This function must be used with an SSO token that has the following scopes: </p>
<ul>
<li><code>esi-characters.read_contacts.v1</code></li>
</ul>
    </div>
    

    

    

    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>toIds</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Number></span>



            
            </td>

            

            

            <td class="description last"><p>Characters array. </p></td>
        </tr>

    
    </tbody>
</table>

    

    
<dl class="details">
    

	

	

	

    

    

    

    

	

	

	

	

	



	

	

	

	
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>A Promise that resolves to cost integer. </p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Number></span>



    </dd>
</dl>


        

    
</dd>

        
            
<hr>
<dt>
    <h4 class="name" id="get"><span class="type-signature"></span>get(id)</h4>
    
    
</dt>
<dd>

    
    <div class="description">
        <p>Get a Message instance for the given message or mail id.</p>
    </div>
    

    

    

    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>id</code></td>
            

            <td class="type">
            
            </td>

            

            

            <td class="description last"><p>The message id</p></td>
        </tr>

    
    </tbody>
</table>

    

    
<dl class="details">
    

	

	

	

    

    

    

    

	

	

	

	

	



	

	

	

	
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Message.html">Message</a></span>



    </dd>
</dl>


        

    
</dd>

        
            
<hr>
<dt>
    <h4 class="name" id="inbox"><span class="type-signature"></span>inbox(labelIds, lastMailId)</h4>
    
    
</dt>
<dd>

    
    <div class="description">
        <p>Return the 50 most recent mail headers belonging to the character that match the query criteria. Queries can be filtered by label, and last_mail_id can be used to paginate backwards. This route is cached for up to 30 seconds. </p>
<p>This makes an HTTP GET request to <a href="https://esi.tech.ccp.is/latest/#!/Mail/get_characters_character_id_mail"><code>/characters/{character_id}/mail/</code></a>. The route version is <code>v1</code>. </p>
<p>The array length of <code>labelIds</code> must be between <code>1</code> and <code>25</code>.  </p>
<p>On success, this resolves to the requested mail.  An example result is:</p>
<pre class="prettyprint source"><code>[
  {
    &quot;from&quot;: 90000001,
    &quot;is_read&quot;: true,
    &quot;labels&quot;: [
      3
    ],
    &quot;mail_id&quot;: 7,
    &quot;recipients&quot;: [
      {
        &quot;recipient_id&quot;: 90000002,
        &quot;recipient_type&quot;: &quot;character&quot;
      }
    ],
    &quot;subject&quot;: &quot;Title for EVE Mail&quot;,
    &quot;timestamp&quot;: &quot;2015-09-30T16:07:00Z&quot;
  }
]</code></pre><p>This function must be used with an SSO token that has the following scopes: </p>
<ul>
<li><code>esi-mail.read_mail.v1</code></li>
</ul>
    </div>
    

    

    

    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>labelIds</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;Number></span>



            
            </td>

            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Fetch only mails that match one or more of the given labels.  If empty, no filtering is performed.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>lastMailId</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>



            
            </td>

            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last"><p>List only mail with an ID lower than the given ID, if present.  If <code>0</code>, the most recent mails are returned.</p></td>
        </tr>

    
    </tbody>
</table>

    

    
<dl class="details">
    

	

	

	

    

    

    

    

	

	

	

	

	



	

	

	

	
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>A Promise that resolves to the parsed JSON of the response.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;Object>></span>



    </dd>
</dl>


        

    
</dd>

        
            
<hr>
<dt>
    <h4 class="name" id="lists"><span class="type-signature"></span>lists()</h4>
    
    
</dt>
<dd>

    
    <div class="description">
        <p>Return all mailing lists that the character is subscribed to.  This route is cached for up to 120 seconds. </p>
<p>This makes an HTTP GET request to <a href="https://esi.tech.ccp.is/latest/#!/Mail/get_characters_character_id_mail_lists"><code>/characters/{character_id}/mail/lists/</code></a>. The route version is <code>v1</code>. </p>
<p>On success, this resolves to mailing lists.  An example result is:</p>
<pre class="prettyprint source"><code>[
  {
    &quot;mailing_list_id&quot;: 1,
    &quot;name&quot;: &quot;test_mailing_list&quot;
  }
]</code></pre><p>This function must be used with an SSO token that has the following scopes: </p>
<ul>
<li><code>esi-mail.read_mail.v1</code></li>
</ul>
    </div>
    

    

    

    
    

    
<dl class="details">
    

	

	

	

    

    

    

    

	

	

	

	

	



	

	

	

	
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>A Promise that resolves to the parsed JSON of the response.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array.&lt;Object>></span>



    </dd>
</dl>


        

    
</dd>

        
            
<hr>
<dt>
    <h4 class="name" id="send"><span class="type-signature"></span>send(mail)</h4>
    
    
</dt>
<dd>

    
    <div class="description">
        <p>Create and send a new mail. </p>
<p>This makes an HTTP POST request to <a href="https://esi.tech.ccp.is/latest/#!/Mail/post_characters_character_id_mail"><code>/characters/{character_id}/mail/</code></a>. The route version is <code>v1</code>. </p>
<p>An example value for <code>mail</code> is shown below:</p>
<pre class="prettyprint source"><code>{
  &quot;approved_cost&quot;: 0,
  &quot;body&quot;: &quot;body string&quot;,
  &quot;recipients&quot;: [
    {
      &quot;recipient_id&quot;: 0,
      &quot;recipient_type&quot;: &quot;&quot;
    }
  ],
  &quot;subject&quot;: &quot;subject string&quot;
}</code></pre><p>On success, this resolves to the id of the created entity.</p>
<p>This function must be used with an SSO token that has the following scopes: </p>
<ul>
<li><code>esi-mail.send_mail.v1</code></li>
</ul>
    </div>
    

    

    

    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>mail</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>



            
            </td>

            

            

            <td class="description last"><p>The mail to send.  The mail descriptor</p></td>
        </tr>

    
    </tbody>
</table>

    

    
<dl class="details">
    

	

	

	

    

    

    

    

	

	

	

	

	



	

	

	

	
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>A Promise that resolves to an id.</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Number></span>



    </dd>
</dl>


        

    
</dd>

        
            
<hr>
<dt>
    <h4 class="name" id="unreadCount"><span class="type-signature"></span>unreadCount()</h4>
    
    
</dt>
<dd>

    
    <div class="description">
        <p>This makes a request to the <code>labels</code> route and then filters the result
to just return the total unread count.</p>
<p>Return a list of the users mail labels, unread counts for each label and a total unread count. This route is cached for up to 30 seconds. </p>
<p>This makes an HTTP GET request to <a href="https://esi.tech.ccp.is/latest/#!/Mail/get_characters_character_id_mail_labels"><code>/characters/{character_id}/mail/labels/</code></a>. The route version is <code>v3</code>. </p>
<p>On success, this resolves to a list of mail labels and unread counts.  Note that the type schema of the response is modified from what is defined in ESI. Specifically, it returns only the <code>total_unread_count</code> property.</p>
<p>This function must be used with an SSO token that has the following scopes: </p>
<ul>
<li><code>esi-mail.read_mail.v1</code></li>
</ul>
    </div>
    

    

    

    
    

    
<dl class="details">
    

	

	

	

    

    

    

    

	

	

	

	

	



	

	

	

	
</dl>


    

    

    

    

    

    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>A Promise that resolves to total_unread_count integer. </p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Number></span>



    </dd>
</dl>


        

    
</dd>

        </dl>
    

    

    
</article>

</section>




		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-md-3 hidden-xs hidden-sm hidden-md"></div>
		</div>
	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a>
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>