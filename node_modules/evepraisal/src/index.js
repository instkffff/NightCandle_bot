const request = require('request-promise-native');

const baseUrl = 'https://evepraisal.com';
const clientName = 'https://github.com/nyanotech/node-evepraisal';

function get(appraisalId) {
  return request({
    method: 'GET',
    uri: `${baseUrl}/a/${appraisalId}.json`,
    headers: {
      'User-Agent': clientName
    },
    json: true
  });
}

function create(content, market, options) {
  if (!options) {
    options = {};
  }

  options.raw_textarea = content;
  options.market = market;

  return request({
    method: 'POST',
    uri: `${baseUrl}/appraisal.json`,
    headers: {
      'User-Agent': clientName
    },
    json: true,
    form: options
  });
}

module.exports = {
  get: get,
  create: create
}
